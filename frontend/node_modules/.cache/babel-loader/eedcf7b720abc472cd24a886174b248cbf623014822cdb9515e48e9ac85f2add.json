{"ast":null,"code":"import csrfFetch from \"./csrf\";\nconst RECEIVE_CART_ITEM = 'cart/RECEIVE_CART_ITEM';\nconst REMOVE_CART_ITEM = 'cart/REMOVE_CART_ITEM';\nconst RECEIVE_CART_ITEMS = 'cart/RECEIVE_CART_ITEMS';\nconst REMOVE_CART_ITEMS = 'cart/REMOVE_CART_ITEMS';\nconst TOGGLE_CART = 'cart/TOGGLE_CART';\nconst ASSIGN_CART = 'cart/ASSIGN_CART';\nconst receiveCartItem = cartItem => ({\n  type: RECEIVE_CART_ITEM,\n  cartItem\n});\nconst receiveCartItems = cartItems => ({\n  type: RECEIVE_CART_ITEMS,\n  cartItems\n});\nconst removeCartItem = cartItemId => ({\n  type: REMOVE_CART_ITEM,\n  cartItemId\n});\nexport const removeCartItems = () => ({\n  type: REMOVE_CART_ITEMS\n});\nexport const toggleCart = () => ({\n  type: TOGGLE_CART\n});\nexport const assignCart = vendor => ({\n  type: ASSIGN_CART,\n  vendor\n});\nexport const deleteCartItems = userId => async dispatch => {\n  const res = await csrfFetch(`/api/user/${userId}/cart_items/destroy_all`, {\n    method: 'DELETE'\n  });\n  if (res.ok) {\n    dispatch(removeCartItems());\n  }\n};\nexport const addToCart = cartItem => async dispatch => {\n  const res = await csrfFetch(`/api/cart_items`, {\n    method: \"POST\",\n    body: JSON.stringify(cartItem)\n  });\n  if (res.ok) {\n    const data = await res.json();\n    dispatch(receiveCartItem(data.cartItem));\n  }\n};\nexport const removeFromCart = cartItemId => async dispatch => {\n  const res = await csrfFetch(`/api/cart_items/${cartItemId}`, {\n    method: \"DELETE\",\n    body: cartItemId\n  });\n  if (res.ok) {\n    dispatch(removeCartItem(cartItemId));\n  }\n};\nexport const getCart = user_id => async dispatch => {\n  const res = await csrfFetch(`/api/user/${user_id}/cart_items`);\n  if (res.ok) {\n    const data = await res.json();\n    dispatch(receiveCartItems(data));\n  }\n};\nconst cartReducer = (state = {\n  isCartOpen: false,\n  cartItems: {},\n  vendor: null\n}, action) => {\n  let newState = {\n    ...state\n  };\n  switch (action.type) {\n    case RECEIVE_CART_ITEM:\n      newState[action.cartItem.id] = action.cartItem;\n      return newState;\n    case RECEIVE_CART_ITEMS:\n      newState = {\n        ...state,\n        ...action.cartItems\n      };\n      return newState;\n    case REMOVE_CART_ITEM:\n      delete newState.cartItems[action.cartItemId];\n      return newState;\n    case REMOVE_CART_ITEMS:\n      newState.cartItems = {};\n      return newState;\n    case TOGGLE_CART:\n      newState.isCartOpen = !state.isCartOpen;\n      return newState;\n    case ASSIGN_CART:\n      newState.vendor = action.vendor;\n      return newState;\n    default:\n      return newState;\n  }\n};\nexport default cartReducer;","map":{"version":3,"names":["csrfFetch","RECEIVE_CART_ITEM","REMOVE_CART_ITEM","RECEIVE_CART_ITEMS","REMOVE_CART_ITEMS","TOGGLE_CART","ASSIGN_CART","receiveCartItem","cartItem","type","receiveCartItems","cartItems","removeCartItem","cartItemId","removeCartItems","toggleCart","assignCart","vendor","deleteCartItems","userId","dispatch","res","method","ok","addToCart","body","JSON","stringify","data","json","removeFromCart","getCart","user_id","cartReducer","state","isCartOpen","action","newState","id"],"sources":["/Users/spencerheywood/Documents/Servo/frontend/src/components/store/cart.js"],"sourcesContent":["import csrfFetch from \"./csrf\";\n\nconst RECEIVE_CART_ITEM = 'cart/RECEIVE_CART_ITEM'\nconst REMOVE_CART_ITEM = 'cart/REMOVE_CART_ITEM'\nconst RECEIVE_CART_ITEMS = 'cart/RECEIVE_CART_ITEMS'\nconst REMOVE_CART_ITEMS = 'cart/REMOVE_CART_ITEMS'\nconst TOGGLE_CART = 'cart/TOGGLE_CART'\nconst ASSIGN_CART = 'cart/ASSIGN_CART'\n\nconst receiveCartItem = cartItem => ({\n    type: RECEIVE_CART_ITEM,\n    cartItem\n})\n\nconst receiveCartItems = cartItems => ({\n    type: RECEIVE_CART_ITEMS,\n    cartItems\n})\n\nconst removeCartItem = cartItemId => ({\n    type: REMOVE_CART_ITEM,\n    cartItemId\n})\n\nexport const removeCartItems = () => ({\n    type: REMOVE_CART_ITEMS\n})\n\nexport const toggleCart = () => ({\n    type: TOGGLE_CART\n})\n\nexport const assignCart = (vendor) => ({\n    type: ASSIGN_CART,\n    vendor\n})\n\nexport const deleteCartItems = userId => async dispatch => {\n    const res = await csrfFetch(`/api/user/${userId}/cart_items/destroy_all`,{\n        method: 'DELETE'\n    })\n\n    if(res.ok){\n        dispatch(removeCartItems())\n    }\n}\n\nexport const addToCart = cartItem => async dispatch =>{\n    const res = await csrfFetch(`/api/cart_items`,\n        {method: \"POST\",\n        body: JSON.stringify(cartItem)})\n        if(res.ok){\n            const data = await res.json();\n            dispatch(receiveCartItem(data.cartItem))\n        }\n}\n\nexport const removeFromCart = cartItemId => async dispatch => {\n    const res = await csrfFetch(`/api/cart_items/${cartItemId}`,\n        {method: \"DELETE\",\n        body: cartItemId})\n    \n    if(res.ok){\n        dispatch(removeCartItem(cartItemId))\n    }\n}\n\nexport const getCart = user_id => async dispatch => {\n    const res = await csrfFetch(`/api/user/${user_id}/cart_items`)\n\n    if(res.ok){\n        const data = await res.json();\n        dispatch(receiveCartItems(data))\n    }\n}\n\nconst cartReducer = (state = { isCartOpen: false, cartItems: {}, vendor: null}, action) => {\n    let newState = { ...state }\n    switch(action.type){\n        case(RECEIVE_CART_ITEM):\n            newState[action.cartItem.id] = action.cartItem\n            return newState;\n        case(RECEIVE_CART_ITEMS):\n            newState = { ...state, ...action.cartItems };\n            return newState\n        case(REMOVE_CART_ITEM):\n            delete newState.cartItems[action.cartItemId];\n            return newState;\n        case(REMOVE_CART_ITEMS):\n            newState.cartItems = {}\n            return newState\n        case(TOGGLE_CART):\n            newState.isCartOpen = !state.isCartOpen;\n            return newState\n        case(ASSIGN_CART):\n            newState.vendor = action.vendor\n            return newState\n        default:\n            return newState\n    }\n}\n\nexport default cartReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}