{"ast":null,"code":"var _jsxFileName = \"/Users/spencerheywood/Documents/Servo/frontend/src/components/Vendor/VendorIndexItem/index.jsx\",\n  _s = $RefreshSig$();\nimport './VendorIndexItem.css';\nimport { useHistory } from 'react-router-dom';\nimport { ReactComponent as StarSvg } from '../../../assets/svg/reviewStar.svg';\nimport { useEffect, useState } from 'react';\nimport csrfFetch from '../../store/csrf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst VendorIndexItem = ({\n  id,\n  name,\n  imageUrl = ''\n}) => {\n  _s();\n  const history = useHistory();\n  const [reviews, setReviews] = useState([]);\n  const vendorRedirect = e => {\n    e.stopPropagation();\n    window.scrollTo({\n      top: 0\n    });\n    history.push(`/vendors/${id}`);\n  };\n  const fetchVendorReviews = async id => {\n    const res = await csrfFetch(`/api/vendors/${id}/reviews`);\n    if (res.ok) {\n      const data = await res.json();\n      setReviews(Object.values(data.reviews));\n    } else {\n      setReviews([]);\n    }\n  };\n  useEffect(() => {\n    fetchVendorReviews(id);\n  }, [id]);\n  let reviewCount = reviews.length;\n  let total = reviews.reduce((acc, review) => acc + review.score, 0);\n  let average = reviewCount > 0 ? (total / reviewCount).toFixed(1) : '--.--';\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    className: \"vendor-index-item\",\n    onClick: vendorRedirect,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"vendor-index-image-container\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: imageUrl,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"macro-review-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: average\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(StarSvg, {\n        className: \"review-star-svg\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"(\", reviewCount, \")\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, this);\n};\n_s(VendorIndexItem, \"8dRVQYHxmjppiiEXufrGLycP0wg=\", false, function () {\n  return [useHistory];\n});\n_c = VendorIndexItem;\nexport default VendorIndexItem;\nvar _c;\n$RefreshReg$(_c, \"VendorIndexItem\");","map":{"version":3,"names":["useHistory","ReactComponent","StarSvg","useEffect","useState","csrfFetch","jsxDEV","_jsxDEV","VendorIndexItem","id","name","imageUrl","_s","history","reviews","setReviews","vendorRedirect","e","stopPropagation","window","scrollTo","top","push","fetchVendorReviews","res","ok","data","json","Object","values","reviewCount","length","total","reduce","acc","review","score","average","toFixed","className","onClick","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/spencerheywood/Documents/Servo/frontend/src/components/Vendor/VendorIndexItem/index.jsx"],"sourcesContent":["import './VendorIndexItem.css'\nimport { useHistory } from 'react-router-dom'\nimport { ReactComponent as StarSvg } from '../../../assets/svg/reviewStar.svg'\nimport { useEffect, useState } from 'react';\nimport csrfFetch from '../../store/csrf';\n\nconst VendorIndexItem = ({ id, name, imageUrl = '' }) => {\n    const history = useHistory();\n    const [reviews, setReviews] = useState([]);\n\n    const vendorRedirect = (e) => {\n        e.stopPropagation();\n        window.scrollTo({\n            top: 0\n        })\n        history.push(`/vendors/${id}`)\n    }\n\n    const fetchVendorReviews = async id => {\n        const res = await csrfFetch(`/api/vendors/${id}/reviews`);\n        if(res.ok){\n            const data = await res.json();\n            setReviews(Object.values(data.reviews))\n        }else{\n            setReviews([])\n        }\n    }\n\n    useEffect(()=>{\n        fetchVendorReviews(id)\n    }, [id])\n\n    let reviewCount = reviews.length\n    let total = reviews.reduce((acc, review) => acc + review.score, 0)\n    let average = reviewCount > 0 ? (total / reviewCount).toFixed(1) : '--.--'\n\n    return(\n        <li className=\"vendor-index-item\" onClick={vendorRedirect}>\n            <div className=\"vendor-index-image-container\">\n                <img src={imageUrl} alt=\"\"/>\n            </div>\n            <h3>{name}</h3>\n            <span className=\"macro-review-container\">\n                <p>{average}</p>\n                <StarSvg className=\"review-star-svg\" />\n                <p>({reviewCount})</p>\n            </span>\n        </li>\n    )\n}\n\nexport default VendorIndexItem"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}