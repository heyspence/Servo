{"ast":null,"code":"export const restoreCSRF = async () => {\n  const res = await fetch('/api/session');\n  const token = res.headers.get('X-CSRF-Token');\n  if (token) {\n    sessionStorage.setItem('X-CSRF-Token', token);\n  } else {\n    sessionStorage.removeItem('X-CSRF-Token');\n  }\n};\nconst csrfFetch = async (url, options = {}) => {\n  options.method = options.method || 'GET';\n  options.headers = options.headers || {};\n  if (options.method.toUpperCase() !== 'GET') {\n    options.headers['Content-Type'] = options.headers['Content-Type'] || 'application/json';\n    options.headers['X-CSRF-Token'] = sessionStorage.getItem(\"X-CSRF-Token\");\n  }\n  const res = await fetch(url, options);\n  // if(!res.ok) throw res;\n  return res;\n};\nexport default csrfFetch;","map":{"version":3,"names":["restoreCSRF","res","fetch","token","headers","get","sessionStorage","setItem","removeItem","csrfFetch","url","options","method","toUpperCase","getItem"],"sources":["/Users/spencerheywood/Documents/Servo/frontend/src/components/store/csrf.js"],"sourcesContent":["export const restoreCSRF = async () => {\n    const res = await fetch('/api/session')\n    const token = res.headers.get('X-CSRF-Token')\n    if(token){\n        sessionStorage.setItem('X-CSRF-Token', token)\n    }else{\n        sessionStorage.removeItem('X-CSRF-Token')\n    }\n}\n\n\nconst csrfFetch = async (url, options = {}) => {\n    options.method = options.method || 'GET';\n    options.headers = options.headers || {};\n    if(options.method.toUpperCase() !== 'GET'){\n        options.headers['Content-Type'] = \n            options.headers['Content-Type'] || 'application/json';\n        options.headers['X-CSRF-Token'] = sessionStorage.getItem(\"X-CSRF-Token\");\n    }\n\n    const res = await fetch(url, options);\n    // if(!res.ok) throw res;\n    return res;\n}\n\nexport default csrfFetch;"],"mappings":"AAAA,OAAO,MAAMA,WAAW,GAAG,MAAAA,CAAA,KAAY;EACnC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,cAAc,CAAC;EACvC,MAAMC,KAAK,GAAGF,GAAG,CAACG,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;EAC7C,IAAGF,KAAK,EAAC;IACLG,cAAc,CAACC,OAAO,CAAC,cAAc,EAAEJ,KAAK,CAAC;EACjD,CAAC,MAAI;IACDG,cAAc,CAACE,UAAU,CAAC,cAAc,CAAC;EAC7C;AACJ,CAAC;AAGD,MAAMC,SAAS,GAAG,MAAAA,CAAOC,GAAG,EAAEC,OAAO,GAAG,CAAC,CAAC,KAAK;EAC3CA,OAAO,CAACC,MAAM,GAAGD,OAAO,CAACC,MAAM,IAAI,KAAK;EACxCD,OAAO,CAACP,OAAO,GAAGO,OAAO,CAACP,OAAO,IAAI,CAAC,CAAC;EACvC,IAAGO,OAAO,CAACC,MAAM,CAACC,WAAW,CAAC,CAAC,KAAK,KAAK,EAAC;IACtCF,OAAO,CAACP,OAAO,CAAC,cAAc,CAAC,GAC3BO,OAAO,CAACP,OAAO,CAAC,cAAc,CAAC,IAAI,kBAAkB;IACzDO,OAAO,CAACP,OAAO,CAAC,cAAc,CAAC,GAAGE,cAAc,CAACQ,OAAO,CAAC,cAAc,CAAC;EAC5E;EAEA,MAAMb,GAAG,GAAG,MAAMC,KAAK,CAACQ,GAAG,EAAEC,OAAO,CAAC;EACrC;EACA,OAAOV,GAAG;AACd,CAAC;AAED,eAAeQ,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}