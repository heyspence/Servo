{"ast":null,"code":"var _jsxFileName = \"/Users/spencerheywood/Documents/Servo/frontend/src/components/Cart/index.js\",\n  _s = $RefreshSig$();\nimport './Cart.css';\nimport { ReactComponent as CloseIcon } from '../../assets/svg/Close.svg';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useEffect } from 'react';\nimport { assignCart, getCart, toggleCart } from '../store/cart';\nimport CartItem from './CartItem';\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport { findVendorByService } from '../store/vendor';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Cart = () => {\n  _s();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const cartItems = useSelector(state => {\n    var _state$cart;\n    return (_state$cart = state.cart) !== null && _state$cart !== void 0 && _state$cart.cartItems ? Object.values(state.cart.cartItems) : [];\n  });\n  const currentUserId = useSelector(state => {\n    var _state$session$user;\n    return (_state$session$user = state.session.user) === null || _state$session$user === void 0 ? void 0 : _state$session$user.id;\n  });\n  const cartVendor = useSelector(state => {\n    var _cartItems$;\n    return findVendorByService(state, (_cartItems$ = cartItems[0]) === null || _cartItems$ === void 0 ? void 0 : _cartItems$.serviceId);\n  });\n  const isCartOpen = useSelector(state => {\n    var _state$cart2;\n    return (_state$cart2 = state.cart) === null || _state$cart2 === void 0 ? void 0 : _state$cart2.isCartOpen;\n  });\n  const totalPrice = cartItems.reduce((total, item) => {\n    return total + item.price;\n  }, 0).toFixed(2);\n  useEffect(() => {\n    if (isCartOpen) {\n      dispatch(getCart(currentUserId));\n    }\n  }, [isCartOpen, currentUserId, dispatch]);\n  useEffect(() => {\n    dispatch(assignCart(cartVendor));\n  }, [cartVendor]);\n  const handleCartClick = e => {\n    e.stopPropagation();\n  };\n  const handleVendorClick = () => {\n    closeCart();\n    history.push(`/vendors/${cartVendor.id}`);\n  };\n  const closeCart = () => {\n    dispatch(toggleCart());\n  };\n  const handleCheckout = () => {\n    closeCart();\n    history.push(`/checkout`);\n  };\n  if (!isCartOpen) return null;\n  const cartContent = cartItems.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"cart-list\",\n      children: cartItems && cartItems.map(cartItem => {\n        return /*#__PURE__*/_jsxDEV(CartItem, {\n          cartItem: cartItem\n        }, cartItem.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 32\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"checkout-button\",\n      onClick: handleCheckout,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Checkout \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"$\", totalPrice]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-header empty-cart\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Empty Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Build and save carts from multiple stores\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Add items to get started\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart-backdrop\",\n    onClick: closeCart,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-main\",\n      onClick: handleCartClick,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cart-close\",\n        children: /*#__PURE__*/_jsxDEV(CloseIcon, {\n          onClick: closeCart\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), cartContent]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n};\n_s(Cart, \"/+ropZcPvRoC8+DFOB4hb7WzQsU=\", false, function () {\n  return [useDispatch, useHistory, useSelector, useSelector, useSelector, useSelector];\n});\n_c = Cart;\nexport default Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["ReactComponent","CloseIcon","useDispatch","useSelector","useEffect","assignCart","getCart","toggleCart","CartItem","useHistory","findVendorByService","jsxDEV","_jsxDEV","Fragment","_Fragment","Cart","_s","dispatch","history","cartItems","state","_state$cart","cart","Object","values","currentUserId","_state$session$user","session","user","id","cartVendor","_cartItems$","serviceId","isCartOpen","_state$cart2","totalPrice","reduce","total","item","price","toFixed","handleCartClick","e","stopPropagation","handleVendorClick","closeCart","push","handleCheckout","cartContent","length","children","className","map","cartItem","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["/Users/spencerheywood/Documents/Servo/frontend/src/components/Cart/index.js"],"sourcesContent":["import './Cart.css'\nimport { ReactComponent as CloseIcon } from '../../assets/svg/Close.svg'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { useEffect } from 'react'\nimport { assignCart, getCart, toggleCart } from '../store/cart'\nimport CartItem from './CartItem'\nimport { useHistory } from 'react-router-dom/cjs/react-router-dom.min';\nimport { findVendorByService } from '../store/vendor'\n\nconst Cart = () => {\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const cartItems = useSelector(state => state.cart?.cartItems ? Object.values(state.cart.cartItems) : [])\n    const currentUserId = useSelector(state => state.session.user?.id)\n    const cartVendor = useSelector(state => findVendorByService(state, cartItems[0]?.serviceId))\n    const isCartOpen = useSelector(state => state.cart?.isCartOpen)\n\n    const totalPrice = cartItems.reduce((total, item) => {\n        return total + item.price\n    }, 0).toFixed(2)\n\n    useEffect(()=>{\n        if(isCartOpen){\n            dispatch(getCart(currentUserId))\n        }\n    },[isCartOpen, currentUserId, dispatch])\n\n    useEffect(()=>{\n        dispatch(assignCart(cartVendor))\n    },[cartVendor])\n\n\n    const handleCartClick = (e) => {\n        e.stopPropagation();\n    }\n\n    const handleVendorClick = () => {\n        closeCart()\n        history.push(`/vendors/${cartVendor.id}`)\n    }\n\n    const closeCart = () => {\n        dispatch(toggleCart())\n    }\n\n    const handleCheckout = () => {\n        closeCart()\n        history.push(`/checkout`)\n    }\n    \n    if(!isCartOpen) return null;\n\n    const cartContent = cartItems.length > 0 ? (\n        <>\n            {/* <div className=\"cart-header\">\n                <p>Your Cart</p>\n                <h3 onClick={handleVendorClick}>\n                    {cartVendor?.name}\n                    <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\"><path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M5.79289 12.7071C5.40237 12.3166 5.40237 11.6834 5.79289 11.2929L9.08579 8L5.79289 4.70711C5.40237 4.31658 5.40237 3.68342 5.79289 3.29289C6.18342 2.90237 6.81658 2.90237 7.20711 3.29289L11.2071 7.29289C11.3946 7.48043 11.5 7.73478 11.5 8C11.5 8.26521 11.3946 8.51957 11.2071 8.70711L7.20711 12.7071C6.81658 13.0976 6.18342 13.0976 5.79289 12.7071Z\" fill=\"#191919\"></path></svg>\n                </h3>\n            </div> */}\n            <ul className=\"cart-list\">\n                {cartItems && cartItems.map((cartItem)=>{\n                        return <CartItem key={cartItem.id} cartItem={cartItem} />\n                })}\n            </ul>\n            <button className=\"checkout-button\" onClick={handleCheckout}>\n                <p>Checkout </p>\n                <p>${totalPrice}</p>\n            </button>\n        </>\n    ) : (\n        <>\n            <div className=\"cart-header empty-cart\">\n                <h3>Empty Cart</h3>\n                <p>Build and save carts from multiple stores</p>\n                <p>Add items to get started</p>\n            </div>\n        </>\n    )\n\n    return(\n        <div className=\"cart-backdrop\" onClick={closeCart}>\n            <div className=\"cart-main\" onClick={handleCartClick}>\n                <div className=\"cart-close\">\n                    <CloseIcon onClick={closeCart} />\n                </div>\n                {cartContent}\n            </div>\n        </div>\n    )\n}\n\n\nexport default Cart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}